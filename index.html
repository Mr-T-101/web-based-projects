<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Star Wars Weather</title>
        <link href="index.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <header>
         <section id="weather">
             <div id="nav">
                 <div id="locate">
                     <form id="location-form">
                         <label for="location">Location (eg. London,uk):</label>
                         <input type="text" id="location" name="location" required>
                         <button type="button" form="location-form" formnovalidate>Let's Go!</button>
                     </form>
                 </div>
        </header>
        <main>
                <div id="output">
                    
                </div>
            </div>
        </section>
        </main>
        <section id="footer">
            <footer>
                <!-- Shows who made the website, the orginial and links -->
                <h1>StarWars Weather</h1>
                <h4>This project was inspired by Tom Scott (Link to Youtube page below).</h4>
                <h4>Why was this made?</h4>
                <blockquote>
                    <p>
                        This website was made to recreate Tom Scott's wonderful website Star Wars weather.
                        Unfortunately this website is now down as Yahoo dropped it's support for Yahoo Pipes and Yahoo Weather API.
                        So a few months back I set out to recreate the orginial. Keep in mind that this website's API can only handle 60 calls per minute 
                        and 1 million calls per month so at times it may not function properly. Because of this <strong>PLEASE NO BOTS!!</strong>
                    </p>
                </blockquote>
                <h4>How does it work?</h4>
                <blockquote>
                    <p>
                        This webpage works the way it does thanks to the wonderful world of API's or application program interface's. 
                        The input must be correct for the API to work you can do <strong>[city/state],[two letter country code]</strong> or
                        <strong>[city/state],[country name]</strong> or <strong>[country name]</strong>. 
                        The input is sent to the API and returned as a .JSON file the .JSON file's content is compared to the conditions of a star wars planet and vola!
                        <br/>
                        <a href="https://www.youtube.com/watch?v=BxV14h0kFs0">More about API's, the white cliffs of dover, and the end of the universe</a>
                    </p>
                </blockquote>
                <h4>Accessibility</h4>
                <blockquote>
                    <p>
                        I have tried to make this as accessible as possible if you feel it's needs improving in any way
                        please email me at <a href="mailto:info.starwarsweather@gmail.com">info.starwarsweather@gmail.com</a>.
                        I have some code in the works that will make the website more accessible.
                    </p>
                </blockquote>
                <h4>Made with love by Tom</h4>
                <h4>Socials</h4>
                <blockquote>
                 <h4><a href="https://tom-s-amazing-projects.web.app">My Website</a></h4>
                 <h4><a href="https://www.youtube.com/channel/UCBa659QWEk1AI4Tg--mrJ2A">Tom Scott's Channel</a></h4>
                </blockquote>
                <h4>Written in HTML, CSS, and JavaScript</h4>
                <h4>7.03.2022</h4>
                <h4>Copyright Disclaimer</h4>
                <p>
                   All copyrighted pictures on this page are used under the <a href="https://www.alrc.gov.au/publication/genes-and-ingenuity-gene-patenting-and-human-health-alrc-report-99/28-copyright-and-databases/copyright-law/#:~:text=The%20Copyright%20Act%201968%20(Cth,subject%20matter%20other%20than%20works.">Australian Copyright Act 1968</a>, 
                   allowance is made for fair dealing for purposes such as criticism or review, research or study,
                   parody or satire, reporting news, enabling a disabled person to access the material, or by professional advice by a lawyer,
                   patent attorney, or trade mark attorney.
                   I have provided links where applicable.
                </p>
            </footer>
        </section>
    </body>
    <section id="script">
     <!-- Fetches api data and prints them to the console -->
     <script type="text/JavaScript">
        async function fetchAPIData(e) {
         e.preventDefault();
         const locationInput = document.getElementById("location");
         
         const { value } = locationInput
         const endpoint = `https://api.openweathermap.org/data/2.5/weather?q=${value}&APPID=[my-api-key]`;
         // do the URL Request
         const response = await fetch(endpoint);

         // If it's ok parse the data and update the DOM
         // otherwise throw an error
         if (response.ok) {
             var data = await response.json();
             console.log(data)
             function drawWeather( d ) {
                 let temp = d.main.temp;
                 let feelslike = d.main.feels_like;
                 const humidity = d.main.humidity;
                 const clouds = d.weather[0].description;
                 temp = temp -= 273.15;
                 feelslike = feelslike -= 273.15;
                 temp = Math.round(temp)
                 feelslike = Math.round(feelslike)
                 temp = temp
                 feelslike = feelslike
                 
                 if (temp >= '46') {
                     document.getElementById("output").innerHTML = `
                         <div id="container">
                             <h3 class="titlet" style="color:white;">Wowzers thats hot! And stormy!</h3>
                             <h3 class="planet" style="color:white;">Its like Mustafa</h3>
                             <img src="https://starwars.fandom.com/wiki/Mustafar?file=Mustafar-Landscape.jpg" data-attr="true">
                             <p><a href="https://starwars.fandom.com/wiki/Mustafar">Photo: Wookieepedia</a></p>
                             <h3 class="tempt" style="color:white;">Temp</h3>
                             <h3 class="temp" style="color:white;">${temp}&deg;c</h3>
                             <h3 class="feelst" style="color:white;">Feels Like</h3>
                             <h3 class="feels" style="color:white;">${feelslike}&deg;c</h3>
                             <h3 class="humdt" style="color:white;">Humidity</h3>
                             <h3 class="humd" style="color:white;">${humidity}%</h3>
                             <h3 class="current" style="color:white;">Currently</h3>
                             <h3 class="clouds" style="color:white;">${clouds}</h3>
                             <p class="explain" style="color:white;">You should get some sunscreen</p>
                         <div>
                        `;

                   } 
                 else if (clouds === 'mist' || clouds === 'haze') {
                    document.getElementById("output").innerHTML = `
                     <div id=container>
                         <h3 class="titlet" style="color:white;">Misty out there, ${temp}&deg c</h3>
                         <h3 class="planet" style="color:white;">Reminds me of Dagobar</h3>
                         <img src="https://starwarsblog.starwars.com/wp-content/uploads/sites/6/2015/08/Dagobah_890df592.jpeg" data-attr="true">
                         <p><a href="https://www.starwars.com/databank/dagobah">Photo: Offical Star Wars Website</a></p>
                         <h3 class="tempt" style="color:white;">Temp</h3>
                         <h3 class="temp" style="color:white;">${temp}&deg;c</h3>
                         <h3 class="feelst" style="color:white;">Feels Like</h3>
                         <h3 class="feels" style="color:white;">${feelslike}&deg;c</h3>
                         <h3 class="humdt" style="color:white;">Humidity</h3>
                         <h3 class="humd" style="color:white;">${humidity}%</h3>
                         <h3 class="current" style="color:white;">Currently</h3>
                         <h3 class="clouds" style="color:white;">${clouds}</h3>
                         <p class="explain">Get some mosquito spray</p>
                     </div>
                    `;
                    }
                 else if (clouds === 'heavy intensity rain') {
                     document.getElementById("output").innerHTML = `
                         <div id="container">
                             <h3 class="titlet" style="color:white;">It's stormy</h3>
                             <h3 class="planet" style="color:white;">Its like Eadu</h3>
                             <img src="https://lumiere-a.akamaihd.net/v1/images/eadu-main_7ebaa60a.jpeg?region=0%2C0%2C1560%2C878&width=1536" data-attr="true">
                             <p><a href="https://www.starwars.com/databank/eadu">Photo: Offical Star Wars Website</a></p>
                             <h3 class="tempt" style="color:white;">Temp</h3>
                             <h3 class="temp" style="color:white;">${temp}&deg;c</h3>
                             <h3 class="feelst" style="color:white;">Feels Like</h3>
                             <h3 class="feels" style="color:white;">${feelslike}&deg;c</h3>
                             <h3 class="humdt" style="color:white;">Humidity</h3>
                             <h3 class="humd" style="color:white;">${humidity}%</h3>
                             <h3 class="current" style="color:white;">Currently</h3>
                             <h3 class="clouds" style="color:white;">${clouds}</h3>
                             <p class="explain" style="color:white;">
                                 Here is some money. 
                                 <br/>
                                 Get yourself a umbrella.
                             </p>
                         </div>
                        `;
                  }
                 else if (temp >= '35' && temp <= '45') {
                     document.getElementById("output").innerHTML = `
                         <div id="container">
                             <h3 class="titlet">Wow! ${temp}&deg c! Very, HOT!!</h3>
                             <h3 class="planet">Its like Tatooine</h3>
                             <img src="https://lumiere-a.akamaihd.net/v1/images/tatooine-main_1633e73f.jpeg?region=164%2C0%2C953%2C536" data-attr="false">
                             <p><a href="https://www.starwars.com/databank/tatooine">Photo: Offical Star Wars Website</a></p>
                             <h3 class="tempt">Temp</h3>
                             <h3 class="temp">${temp}&deg;c</h3>
                             <h3 class="feelst">Feels Like</h3>
                             <h3 class="feels">${feelslike}&deg;c</h3>
                             <h3 class="humdt">Humidity</h3>
                             <h3 class="humd">${humidity}%</h3>
                             <h3 class="current">Currently</h3>
                             <h3 class="clouds">${clouds}</h3>
                             <p class="explain">Hot, dry, look out for the Jawas</p>
                         </div>
                        `;
                     
                 } 
                 else if (temp >= '25' && temp <= '34') {
                     document.getElementById("output").innerHTML = `
                         <div id="container">
                             <h3 class="titlet" style="color:white;">Nice day for a swim.</h3>
                             <h3 class="planet" style="color:white;">Its like Scarif out there</h3>
                             <img src="https://pyxis.nymag.com/v1/imgs/0fd/20f/fb453a06af56a5fc73d462d14bbeba8a6e-scarif-2.w710.jpg" data-attr="true">
                             <p><a href="https://www.starwars.com/databank/scarif">Photo: Offical Star Wars Website</a></p>
                             <h3 class="tempt" style="color:white;">Temp</h3>
                             <h3 class="temp" style="color:white;">${temp}&deg;c</h3>
                             <h3 class="feelst" style="color:white;">Feels Like</h3>
                             <h3 class="feels" style="color:white;">${feelslike}&deg;c</h3>
                             <h3 class="humdt" style="color:white;">Humidity</h3>
                             <h3 class="humd" style="color:white;">${humidity}%</h3>
                             <h3 class="current" style="color:white;">Currently</h3>
                             <h3 class="clouds" style="color:white;">${clouds}</h3>
                             <p class="explain" style="color:white;">Here's a towel</p>
                         </div>
                        `;
                 }
                 else if (temp >='15' && temp <= '24') {
                     document.getElementById("output").innerHTML = `
                         <div id="container">
                             <h3 class="titlet" style="color:white;">Nice and cool.</h3>
                             <h3 class="planet" style="color:white;">Its like Endor out there</h3>
                             <img src="https://lumiere-a.akamaihd.net/v1/images/databank_ewokvillage_01_169_e8ae9721.jpeg?region=62%2C0%2C1498%2C843" data-attr="true">
                             <p><a href="https://www.starwars.com/databank/bright-tree-village">Photo: Offical Star Wars Website</a></p>
                             <h3 class="tempt" style="color:white;">Temp</h3>
                             <h3 class="temp" style="color:white;">${temp}&deg;c</h3>
                             <h3 class="feelst" style="color:white;">Feels Like</h3>
                             <h3 class="feels" style="color:white;">${feelslike}&deg;c</h3>
                             <h3 class="humdt" style="color:white;">Humidity</h3>
                             <h3 class="humd" style="color:white;">${humidity}%</h3>
                             <h3 class="current" style="color:white;">Currently</h3>
                             <h3 class="clouds" style="color:white;">${clouds}</h3>
                             <p class="explain" style="color:white;">Watch your step</p>
                         </div>
                        `;
                 }
                 else if (temp >= '5' && temp <= '14') {
                     document.getElementById("output").innerHTML = `
                         <div id="container">
                             <h3 class="titlet">Bit chilly</h3>
                             <h3 class="planet">Sounds like Bespin</h3>
                             <img src="Cloud_City.webp" data-attr="false">
                             <p><a href="https://static.wikia.nocookie.net/starwars/images/f/f1/Cloud_City.png/revision/latest/scale-to-width-down/1000?cb=20150403173842">Photo: Wookieepedia</a></p>
                             <h3 class="tempt">Temp</h3>
                             <h3 class="temp">${temp}&deg;c</h3>
                             <h3 class="feelst">Feels Like</h3>
                             <h3 class="feels">${feelslike}&deg;c</h3>
                             <h3 class="humdt">Humidity</h3>
                             <h3 class="humd">${humidity}%</h3>
                             <h3 class="current">Currently</h3>
                             <h3 class="clouds">${clouds}</h3>
                             <p class="explain">Don't end up like C-3PO</p>
                         </div>
                        `;

                 }
                 else if (temp <= '4') {
                     document.getElementById("output").innerHTML = `
                         <div id="container">
                             <h3 class="titlet">Brr it's cold! ${temp}&deg c!</h3>
                             <h3 class="planet">Its like Hoth out there</h3>
                             <img src="https://lumiere-a.akamaihd.net/v1/images/Hoth_d074d307.jpeg?region=0%2C0%2C1200%2C675" data-attr="false">
                             <p><a href="https://www.starwars.com/databank/hoth">Photo: Offical Star Wars Website</a></p>
                             <h3 class="tempt">Temp</h3>
                             <h3 class="temp">${temp}&deg;c</h3>
                             <h3 class="feelst">Feels Like</h3>
                             <h3 class="feels">${feelslike}&deg;c</h3>
                             <h3 class="humdt">Humidity</h3>
                             <h3 class="humd">${humidity}%</h3>
                             <h3 class="current">Currently</h3>
                             <h3 class="clouds">${clouds}</h3>
                             <p class="explain">you should ride tauntaun</p>
                         </div>
                        `;
                 } 
                 
                 
                 else {
                     window.location.href = '404.html';
                 }
                }
             drawWeather(data);
            }
         else {
             window.location.href = '404.html';
         }

         }
         //listens for button on html side and runs fectAPIData()
         document.addEventListener("DOMContentLoaded", () => {
             document.querySelector("button[type=button]").addEventListener("click", fetchAPIData);
             const elem = document.getElementById("input");
         }         
        );
     </script>
    <!-- This links the website to Firebase Analytics -->
     <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyCbPfxcxzM04RCy7TWV4xzpBitShD8PCaE",
          authDomain: "starwars-weather.firebaseapp.com",
          projectId: "starwars-weather",
          storageBucket: "starwars-weather.appspot.com",
          messagingSenderId: "710609061373",
          appId: "1:710609061373:web:5565f5880fdfb7b36f4594",
          measurementId: "G-7YEKD8ML75"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
      </script>
    </section>
</html>
